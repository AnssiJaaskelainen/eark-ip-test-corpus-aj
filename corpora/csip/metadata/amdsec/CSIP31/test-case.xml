<!-- Root element for an individual test case, allows these to be wrapped into
XML lists -->
<testCase xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="testCase.xsd"
  testable="TRUE">
  <!-- Unique ID for the test case -->
  <id specification="E-ARK CSIP" version="2.0-DRAFT" requirementId="CSIP31"/>
  <!-- URL references to requirements for convenient lookup -->
  <references>
    <reference requirementId="CSIP31" URL="http://earkcsip.dilcis.eu/#CSIP31"/>
  </references>
  <!-- The full text of the requirement. -->
  <requirementText>If administrative / preservation metadata is available, it must be described using the administrative metadata section (amdSec) element.
It is possible to transfer metadata in a package using just the descriptive metadata sectiond/or adminstrative metadata section.
Cardinality and Level: 0..n SHOULD
</requirementText>
  <!-- Textual description of the test case, extra notes beyond the requirment text. -->
  <description>
    This testcase is for requirement CSIP31, which relates to administrative metadata; the optional amdSec elements in the mets.xml file and to the optional files in the folder metadata/descriptive.
    The requirement CSIP31 is not stringent and therefore difficult to test, it is based on conditions and optional elements.
    The requirement text about 'It is possible to transfer metadata in a package using just the descriptive metadata sectiond/or adminstrative metadata section.' does not give much meaning here.
    
      </description>
  <!-- List of requirments that this test case depends on in addition to the
  main requirememt, e.g. general requirments on the form of IDs -->
  <dependencies>
    <dependency requirementId="CSIPSTR6" URL="http://earkcsip.dilcis.eu/#41-folder-structure-of-the-csip"></dependency>
  </dependencies>
  <!-- A list of the validation rules derived from the test case -->
  <rules>
    
    <rule id="1">
      <!-- Text description of the validation rule -->
      <description>There should be an XML element named amdSec in the mets.xml</description>
      <!-- Details of the validation error generated by the message, can be one of: [ ERROR | WARNING | INFO ]-->
      <error level="WARNING">
        <!-- Expected error message when the rule is violated. -->
        <message>The element mets/amdSec does not exist in METS.xml. It SHOULD be there.</message>
      </error>
      <corpusPackages>
        <!-- Details of corpus packages designed to test this validation rule. -->
        <package name="IP_18000_CSIP31_1" isValid="FALSE">
          <path>/corpus/structure/dmdSec/CSIP31/IP_18000_CSIP31_1</path>
          <!-- Full description of corpus package features. -->
          <description>A package based on the minimal IP with schemas. Contains no dmdSec</description>
        </package>
      </corpusPackages>
    </rule>
    
    <!-- Rule for consistency between dmdSec and files in the metadata/descriptive folder - can only be a warning due to (too) loose requirement -->
    <rule id="2">
      <!-- Text description of the validation rule -->
      <description>When one or more mets/dmdSec element exist in mets.xml there SHOULD be files in the folder
        metadata/descriptive</description>
      <!-- Details of the validation error generated by the message, can be one of: [ ERROR | WARNING | INFO ]-->
      <error level="WARNING">
        <!-- Expected error message when the rule is violated. -->
        <message>One or more mets/dmdSec elements exist(s). No file(s) found in metadata/descriptive. File(s) SHOULD be
          there.</message>
      </error>
      <corpusPackages>
        <!-- Details of corpus packages designed to test this validation rule. -->
        <package name="IP_18000_CSIP31_2" isValid="FALSE">
          <path>/corpus/structure/dmdSec/CSIP31/IP_18000_CSIP31_2</path>
          <!-- Full description of corpus package features. -->
          <description>A package based on the minimal IP with schemas. Contains a dmdSec element in mets.xml. Contains
            no files in metadata/descriptive</description>
        </package>
      </corpusPackages>
    </rule>
    
    <!-- Rule for consistency between files in the metadata/descriptive folder and dmdSec can be of type ERROR due to wording of requirement: 'Must be used if descriptive metadata for the package content is available' -->
    <rule id="3">
      <!-- Text description of the validation rule -->
      <description>When one or more files in the folder metadata/descriptive exist there should be one or more
        mets/dmdSec element(s) in mets.xml</description>
      <!-- Details of the validation error generated by the message, can be one of: [ ERROR | WARNING | INFO ]-->
      <error level="ERROR">
        <!-- Expected error message when the rule is violated. -->
        <message>One or more file(s) found in the directory metadata/descriptive. The dmdSec-element in METS.xml 'Must be used if descriptive metadata for the
          package content is available'</message>
      </error>
      <corpusPackages>
        <!-- Details of corpus packages designed to test this validation rule. -->
        <package name="IP_18000_CSIP31_3" isValid="FALSE">
          <path>/corpus/structure/dmdSec/CSIP31/IP_18000_CSIP31_3</path>
          <!-- Full description of corpus package features. -->
          <description>A package based on the minimal IP with schemas. Contains no dmdSec in METS.xml. Contains files in the folder
            metadata/descriptive</description>
        </package>
      </corpusPackages>
    </rule>
    
    
  </rules>
</testCase>
