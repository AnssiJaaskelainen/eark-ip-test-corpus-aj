Creating Test Cases
===================

Documenting Test Cases
----------------------
### Principles
- Test cases should be based on a single requirement, although there may be
dependencies on other requirements.
- A test case incorporates a set of rules that are the fine grained tests needed
to completely validate the requirement.

### Notes on Test Case XML
- Using the METS element name doesn't work for non-METS requirements,
  e.g. folder structure requirements, use the requirement ID structure instead.
- do we need to document the minimal test IP structure?

### XML for structured test case description

```xml
<!-- Root element for an individual test case, allows these to be wrapped into
XML lists -->
<testCase>
  <!-- Unique ID for the test case -->
  <id specification="" version="" section="" requirement="" />
  <!-- URL reference to requirement for convenient lookup -->
  <reference></reference>
  <!-- Textual description of the test case, may just be a repeat of the
  requirment text. -->
  <description></description>
  <!-- List of test cases that this test case depends on -->
  <dependencies>
    <!-- Individual test case dependencies listed by ID -->
    <dependency specification="" version="" section="" requirement="" />
  </dependencies>
  <!-- A list of the validation rules derived from the test case -->
  <rules>
    <!-- Individual validation rule entry, identified by a running number
    that's unique within the test case only -->
    <rule id="">
      <!-- Text description of the validation rule -->
      <description></description>
      <!-- Details of the validation error generated by the message, can be
      one of: [ ERROR | WARNING | INFO ]-->
      <error level="">
        <!-- Expected error message when the rule is violated. -->
        <message></message>
      </error>
    </rule>
  </rules>
</testCase>
```

#### Examples

Taken from https://github.com/DILCISBoard/eark-ip-test-corpus/tree/testcase/mets-xml/mets-root-element/corpus/mets-xml/mets/CONTENTTYPESPECIFICATION
```xml
<testCase>
  <id specification="" version="" section="" requirement="" />
  <reference>https://carlwilson.github.io/E-ARK-CSIP/specification/implementation/metadata/#CSIP4</reference>
  <description>
    @CONTENTTYPESPECIFICATION MUST be present and have a value
    that is one of [ SMURFERMS | SMURFSFSB | SIARD1 | SIARD2 | SIARDDK |
    GeoVectorGML | GeoRasterGeotiff | MIXED | OTHER ]
  </description>
  <dependencies />
  <rules>
    <rule id="1">
      <description>@CONTENTTYPESPECIFICATION attribute does not exist</description>
      <error level="ERROR">
        <message>
          mets/@CONTENTTYPESPECIFICATION attribute does not exist.
          MUST be: attribute exists and has a value from the fixed vocabulary of
          [ SMURFERMS | SMURFSFSB | SIARD1 | SIARD2 | SIARDDK | GeoVectorGML |
          GeoRasterGeotiff | MIXED | OTHER ].</message>
      </error>
    </rule>
    <rule id="2">
      <description>@CONTENTTYPESPECIFICATION attribute value is emptry string</description>
      <error level="ERROR">
        <message>
          mets/@CONTENTTYPESPECIFICATION attribute value is emptry string.
          MUST be: a value from the fixed vocabulary of [ SMURFERMS | SMURFSFSB
          | SIARD1 | SIARD2 | SIARDDK | GeoVectorGML | GeoRasterGeotiff
          |MIXED | OTHER ].
        </message>
      </error>
    </rule>
    <rule id="2">
      <description>
        @CONTENTTYPESPECIFICATION attribute value does not match any of the
        allowed values in the vocabulary.
      </description>
      <error level="ERROR">
        <message>
          mets/@CONTENTTYPESPECIFICATION attribute value does not match any of
          the allowed values in the vocabulary. MUST be: a value from the fixed
          vocabulary of [ SMURFERMS | SMURFSFSB | SIARD1 | SIARD2 | SIARDDK |
           GeoVectorGML | GeoRasterGeotiff | MIXED | OTHER ].
        </message>
      </error>
    </rule>
  </rules>
</testCase>
```
